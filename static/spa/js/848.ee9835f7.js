"use strict";(globalThis["webpackChunkauthentication"]=globalThis["webpackChunkauthentication"]||[]).push([[848],{5848:(e,t,l)=>{l.r(t),l.d(t,{default:()=>L});var a=l(9835),o=l(6970),i=l(1957);const n={class:"input-container q-gutter-lg"},s={class:"text-h6"},u={class:"input-container q-gutter-lg"},c={class:"text-h6"},r={class:"text-subtitle1"};function d(e,t,l,d,p,m){const f=(0,a.up)("q-input"),_=(0,a.up)("q-toggle"),v=(0,a.up)("q-btn"),E=(0,a.up)("q-stepper-navigation"),g=(0,a.up)("q-step"),h=(0,a.up)("q-form"),x=(0,a.up)("q-stepper"),I=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(I,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{padding:"",class:"flex justify-center items-start q-pt-xl"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{modelValue:e.step,"onUpdate:modelValue":t[5]||(t[5]=t=>e.step=t),ref:"stepper","alternative-labels":"",animated:"",class:"shadow-2 rounded-borders q-mt-xl q-pa-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{name:0,title:e.$t("LABEL_ENTER_INFO"),"active-icon":"fa-solid fa-plus",icon:"fa-solid fa-plus"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",s,(0,o.zw)(e.$t("TEXT_ENTER_EMAIL")),1),(0,a.Wm)(f,{"no-error-icon":"",filled:"",placeholder:e.$t("LABEL_EMAIL"),name:"email",maxlength:"100",class:"email text-h6",modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.email=t)},null,8,["placeholder","modelValue"]),(0,a.Wm)(_,{modelValue:e.accept,"onUpdate:modelValue":t[1]||(t[1]=t=>e.accept=t),label:e.$t("TEXT_ACCEPT_LICENSE")},null,8,["modelValue","label"]),(0,a.Wm)(E,{class:"flex items-start justify-end q-pt-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:e.stepperNext,loading:e.noNext,color:"primary",label:e.$t("BTN_CONTINUE"),class:"btn-fixed-width"},null,8,["onClick","loading","label"])])),_:1})])])),_:1},8,["title"]),(0,a.Wm)(g,{name:1,title:e.$t("LABEL_VERIFY_IDENTITY"),"active-icon":"fa-solid fa-check",icon:"fa-solid fa-check",class:"q-gutter-xl"},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("div",null,[(0,a._)("div",c,(0,o.zw)(e.$t("TEXT_ENTER_VERIFICATION_CODE")),1),(0,a._)("div",r,(0,o.zw)(e.$t("TEXT_SECURE_LINK_VERIFIED")),1)]),(0,a.Wm)(h,{id:"verifyForm",action:"/auth/verify",method:"post"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:e.verifyCode,"onUpdate:modelValue":t[2]||(t[2]=t=>e.verifyCode=t),name:"verifyCode","bg-color":"grey-2",filled:"",mask:"#####",autofocus:"",class:"text-h4 auth-code"},null,8,["modelValue"]),(0,a.wy)((0,a._)("input",{type:"hidden",name:"resource","onUpdate:modelValue":t[3]||(t[3]=t=>e.resource=t)},null,512),[[i.nr,e.resource]])])),_:1}),(0,a.Wm)(E,{class:"flex items-start justify-between q-pt-xl"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{color:"primary",onClick:t[4]||(t[4]=t=>e.$refs.stepper.previous()),outline:"",label:e.$t("BTN_BACK"),class:"btn-fixed-width"},null,8,["label"]),(0,a.Wm)(v,{onClick:e.stepperDone,loading:e.noNext,color:"primary",label:e.$t("BTN_DONE"),class:"btn-fixed-width"},null,8,["onClick","loading","label"])])),_:1})])])),_:1},8,["title"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}var p=l(499),m=l(8339),f=l(9302),_=l(3276),v=l(3681);const E=(0,a.aZ)({name:"IndexPage",setup(){const e=(0,f.Z)(),{t}=(0,_.QT)(),l=(0,p.iH)("yugan6688@gmail.com"),a=(0,p.iH)(null),o=(0,p.iH)(!1),i=(0,p.iH)(!1),n=(0,p.iH)(0),s=(0,p.iH)((0,m.tv)().currentRoute.value.path.split("/").pop()),u=(0,p.iH)(null);function c(){let u=!0;/^[^@]+@[^@]+\.[^@]+$/.test(l.value)||(u=!1,e.notify({color:"red-5",position:"top",icon:"fa-solid fa-exclamation",message:t("MSG_NOT_VALID_EMAIL")})),!0!==i.value&&(u=!1,e.notify({color:"red-5",position:"top",icon:"fa-solid fa-exclamation",message:t("MSG_NOT_ACCEPT_LICENSE")})),u&&(o.value=!0,v.api.post("auth/signup",{email:l.value,resource:s.value},{withCredentials:!1}).then((function(l){"I005"===l.data.code?e.notify({color:"red-5",position:"top",icon:"fa-solid fa-exclamation",message:t("MSG_HAS_SIGNED_EMAIL")}):"I001"===l.data.code&&(a.value=null,n.value=1),o.value=!1})).catch((function(e){o.value=!1,console.log(e)})))}function r(){o.value=!0,v.api.post("auth/verify/check",{email:l.value,verifyCode:a.value}).then((function(l){"I003"===l.data.code?document.querySelector("#verifyForm").submit():"I004"===l.data.code?e.notify({color:"red-5",position:"top",icon:"fa-solid fa-exclamation",message:t("MSG_VERIFY_CODE_WRONG")}):"I007"===l.data.code&&e.notify({color:"red-5",position:"top",icon:"fa-solid fa-exclamation",message:t("MSG_VERIFY_CODE_TIMEOUT")}),o.value=!1})).catch((function(){n.value=0,o.value=!1}))}return{email:l,accept:i,verifyCode:a,step:n,stepperNext:c,noNext:o,stepperDone:r,resourceUrl:u,resource:s}}});var g=l(1639),h=l(9885),x=l(8225),I=l(8335),T=l(2076),C=l(592),y=l(1992),N=l(4095),b=l(8326),w=l(9984),V=l.n(w);const q=(0,g.Z)(E,[["render",d]]),L=q;V()(E,"components",{QPage:h.Z,QStepper:x.Z,QStep:I.Z,QInput:T.Z,QToggle:C.Z,QStepperNavigation:y.Z,QBtn:N.Z,QForm:b.Z})}}]);